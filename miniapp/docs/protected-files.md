# 変更不可ファイル一覧

このテンプレートには、変更すると動作に支障をきたす可能性があるファイルがあります。以下のファイルは十分注意して扱ってください。

## 🚨 絶対変更禁止ファイル

### 認証システム関連
- **`src/shared/lib/pocketbase.ts`**
  - **理由**: PocketBaseクライアントのシングルトン設定。変更すると認証・DB接続が破綻する
  - **影響**: 全ての認証機能、データベース操作が停止
  - **対応**: このファイルは絶対に変更せず、常にimportして使用すること

- **`src/features/auth/model/useAuth.ts`**
  - **理由**: 認証状態管理、postMessage連携、トークンリフレッシュロジック
  - **影響**: iframe認証、自動ログイン、セッション管理が破綻
  - **対応**: 認証関連の機能追加は、このファイルを基盤として拡張すること

- **`src/features/auth/ui/LoginForm.tsx`**
  - **理由**: ログインフォームのUI実装、postMessage認証と手動ログインの共存
  - **影響**: ログイン機能、認証フローが正常に動作しなくなる
  - **対応**: UIの見た目変更は可能だが、認証ロジックとの連携部分は変更しない

- **`src/features/auth/model/validation.ts`**
  - **理由**: ログインフォームのバリデーションロジック
  - **影響**: フォーム検証が正常に動作しなくなる
  - **対応**: バリデーションルールの追加は可能だが、既存ルールは保持すること

## ⚠️ 慎重に変更すべきファイル

### レイアウト・プロバイダー関連
- **`app/layout.tsx`**
  - **保護対象**: 認証プロバイダーの統合部分
  - **理由**: 認証状態の全体管理に影響
  - **対応**: プロバイダーの順序や設定は変更しない

- **`app/providers/auth-provider.tsx`**
  - **理由**: 認証コンテキストの提供
  - **影響**: 全コンポーネントの認証状態アクセスが停止
  - **対応**: 機能追加時は既存のコンテキスト構造を保持すること

### Server Actions（外部API基盤）
- **`src/shared/server/` 全体**
  - **保護理由**: 外部APIとの統合基盤として設計
  - **対応方針**:
    - ✅ **拡張**: 新しいAPIファイル追加は推奨
    - ⚠️ **変更**: 既存ファイルの修正は慎重に
    - ❌ **削除**: 既存APIファイルの削除は避ける
  - **具体的ファイル**:
    - `fal.server.ts` - FAL AI統合（画像生成等）
    - `openai.server.ts` - OpenAI統合
    - `pocketbase.server.ts` - データベース操作

## ✅ 自由に変更可能なファイル

### コンテンツ・UI関連
- **`src/pages/HomePage.tsx`** - コンテンツ部分の変更は自由
- **`src/shared/ui/`** - UIコンポーネントの追加・拡張は推奨
- **新しいページ・コンポーネント** - 自由に追加可能
- **`src/assets/`** - アセットファイルの追加・変更は自由

### 設定ファイル
- **`tailwind.config.ts`** - Tailwind設定の拡張は推奨
- **`components.json`** - shadcn/ui設定の調整は可能
- **`package.json`** - 依存関係の追加は可能（削除は慎重に）

### その他の許可事項
- **Feature Sliced Design (FSD) に則った新しいディレクトリの追加** - 推奨
  - 新しい機能sliceの作成（`src/features/`配下）
  - エンティティの追加（`src/entities/`配下）
  - 新しいページの作成（`src/pages/`配下）
  - 共通UIコンポーネントの追加（`src/shared/ui/`配下）
  - FSDアーキテクチャに従ったファイル・フォルダ構造の拡張
